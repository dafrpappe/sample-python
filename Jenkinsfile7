def COLOR_MAP = ["SUCCESS": "good", "FAILURE":"danger"]
def props


pipeline {
  agent { 
    dockerfile {
      args '-u root'
    } 
  } 
  stages {    
    stage('Publish on github'){

        steps{
            sh '''
               echo "${PASSWORD}"

               '''


        }
    }
    stage('Build artifact'){

      steps {
        script {

           sh 'git config --global --add safe.directory /home/admin/workspace/python-jenkinsfile'      
            
           GIT_TAG = sh(returnStatus: true, script: 'git describe --tags') 
           return GIT_TAG
           
           sh "echo ${GIT_TAG}"    

           props = readJSON text: '{ "key": "value" }'

           props.each { key, value -> echo "Walked through key $key and value $value"}

        }        
      }    
    }
    stage('Build') {
      steps {
        // Clean before build
        sh '''
           echo "Building artifact ....."

        '''

      }
    }    
  }
}