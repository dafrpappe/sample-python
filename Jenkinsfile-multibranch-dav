
pipeline {
  agent { 
    dockerfile {
      args '-u root'
    } 
  }
  stages {
      stage('different Branch Deploy Code') {

          when {
             expression {
                 return env.BRANCH_NAME != 'main' or env.BRANCH_NAME != 'stage';
             }
          }
          steps {
              sh """
              echo "Building Artifact from different branch"
              """

              sh """
              echo "Deploying Code from different branch"
              """
        }
      }      
      stage('Main Branch Deploy Code') {
          when {
              branch 'main'
          }
          steps {
              sh """
              echo "Building Artifact from Master branch"
              """

            sh """
            echo "Deploying Code from Main branch"
            """
        }
    }
    stage('Stage Branch Deploy Code') {
        when {
            branch 'stage'
        }
        steps {
            sh """
            echo "Building Artifact from Stage branch"
            """
            sh """
            echo "Deploying Code from Stage branch"
            """
            sh """
            echo "Created a test branch"
            """
       }
    }
  }
}
